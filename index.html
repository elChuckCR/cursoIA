<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥dulo 1: La Mentalidad del Chef de Prompts</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: "HyperLearn Neon" - Slate 900 background, Indigo 500 Primary, Pink 500 Secondary, Cyan 400 Accents -->
    <!-- Application Structure Plan: 
         1. Hero Section: "The Mental Shift" - Introduces the "Chef" metaphor and the goal of the module.
         2. Simulation Lab (The Engine): Interactive Chart.js visualization showing 'Entropy' (Next Word Probability). Users toggle between 'Vague' and 'Precise' commands to see how probability distributions collapse, explaining the "Stochastic Parrot" concept.
         3. The Recipe Builder (RTCE + FRE): A gamified 'Prompt Constructor'. Users toggle ingredients (Role, Task, Context, etc.). A live Radar Chart visualizes the 'Structural Integrity' of the prompt, while a text block builds the prompt dynamically.
         4. The Library (Context Window): A comparative Bar Chart (Logarithmic) showing the scale of Gemini's context window vs standard models (WhatsApp vs Library analogy).
         5. Action Protocol: Summary and immediate tasks.
         Rationale: Moves from abstract theory (how AI thinks) to concrete application (building the prompt) to advanced capability (using context).
    -->
    <!-- Visualization & Content Choices:
         1. Entropy Distribution (Bar Chart): Goal: Inform/Compare. Visualizes how vague prompts lead to flat probability curves (confusion) vs precise prompts leading to spiked curves (accuracy).
         2. Prompt Structure Analysis (Radar Chart): Goal: Relationships/Quality. Perfect for showing the balance of a multi-variable formula (RTCE+FRE).
         3. Token Capacity (Horizontal Bar): Goal: Compare. Logarithmic scale used to effectively show the massive difference between 32k and 1M+ tokens.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #1e293b; /* Slate 800 */
        }
        h1, h2, h3, h4, .font-heading {
            font-family: 'Space Grotesk', sans-serif;
        }
        
        /* Chart Container Styling - MANDATORY */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%; /* Adapts to grid column */
            height: 300px;
            max-height: 400px;
            margin: 0 auto;
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        .ingredient-btn {
            transition: all 0.2s ease;
        }
        .ingredient-btn.active {
            background-color: #4f46e5; /* Indigo 600 */
            color: white;
            border-color: #4f46e5;
            box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.3);
        }
        .ingredient-btn:hover:not(.active) {
            background-color: #f1f5f9;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }
    </style>
</head>
<body class="antialiased bg-slate-50 selection:bg-indigo-500 selection:text-white">

    <!-- NAVIGATION -->
    <nav class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-2">
                    <span class="text-2xl">üë®‚Äçüç≥</span>
                    <span class="font-heading font-bold text-xl tracking-tight text-slate-900">HyperLearn <span class="text-indigo-600">OS</span></span>
                </div>
                <div class="hidden md:flex space-x-8 text-sm font-bold text-slate-500 uppercase tracking-wide">
                    <a href="#engine" class="hover:text-indigo-600 transition">01. El Motor</a>
                    <a href="#formula" class="hover:text-indigo-600 transition">02. La F√≥rmula</a>
                    <a href="#context" class="hover:text-indigo-600 transition">03. Contexto</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <header class="relative bg-slate-900 text-white pt-24 pb-32 px-4 overflow-hidden">
        <!-- Abstract Background -->
        <div class="absolute inset-0 opacity-20 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-indigo-500 via-purple-500 to-transparent"></div>
        
        <div class="max-w-5xl mx-auto text-center relative z-10">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-500/20 border border-indigo-400/30 text-indigo-200 text-xs font-bold uppercase tracking-widest mb-6">
                <span class="w-2 h-2 rounded-full bg-green-400 animate-pulse"></span>
                M√≥dulo 1: Mentalidad
            </div>
            <h1 class="text-5xl md:text-7xl font-heading font-black mb-6 leading-tight tracking-tight">
                El Chef de <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400">Prompts</span>
            </h1>
            <p class="text-xl md:text-2xl text-slate-300 max-w-3xl mx-auto font-light leading-relaxed">
                Deja de tratar a la IA como magia. Es un <strong>Motor de Predicci√≥n</strong>. Si cocinas en la oscuridad, obtendr√°s basura. Enciende la luz con ingenier√≠a de precisi√≥n.
            </p>
            <div class="mt-10 flex flex-col sm:flex-row justify-center gap-4">
                <a href="#engine" class="px-8 py-4 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white font-bold shadow-lg shadow-indigo-500/25 transition transform hover:-translate-y-1">
                    Iniciar Entrenamiento
                </a>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-20 relative z-20 pb-20 space-y-24">

        <!-- SECTION 1: THE ENGINE (Stochastic Parrot) -->
        <section id="engine" class="scroll-mt-24">
            <div class="glass-panel rounded-3xl shadow-xl p-8 md:p-10 border-t-4 border-indigo-500">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <h2 class="text-3xl font-heading font-bold text-slate-900 mb-4">El Motor de Predicci√≥n</h2>
                        <p class="text-slate-600 mb-6 text-lg leading-relaxed">
                            Tu "Chef" (la IA) no entiende lo que es una "ensalada". Solo sabe qu√© palabras suelen aparecer cerca de "ensalada" en sus datos. Es un <strong>Loro Estoc√°stico</strong>.
                        </p>
                        <p class="text-slate-600 mb-8 leading-relaxed">
                            Cuando das instrucciones vagas, la IA "alucina" (llena los huecos con promedios). Cuando das instrucciones precisas, colapsas las probabilidades hacia el resultado que quieres.
                        </p>
                        
                        <div class="space-y-4">
                            <h4 class="font-bold text-slate-400 text-sm uppercase tracking-wider">Simulaci√≥n de Input:</h4>
                            <button id="btn-vague" class="w-full text-left p-5 rounded-xl border-2 border-slate-200 hover:border-pink-400 transition group bg-white shadow-sm hover:shadow-md">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="font-bold text-slate-800 text-lg">üî¥ Input Vago</span>
                                    <span class="text-xs bg-pink-100 text-pink-700 font-bold px-2 py-1 rounded">Alta Incertidumbre</span>
                                </div>
                                <p class="text-slate-500 text-sm font-mono bg-slate-50 p-2 rounded">Prompt: "Hazme algo rico."</p>
                            </button>
                            <button id="btn-precise" class="w-full text-left p-5 rounded-xl border-2 border-slate-200 hover:border-teal-400 transition group bg-white shadow-sm hover:shadow-md">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="font-bold text-slate-800 text-lg">üü¢ Input Preciso</span>
                                    <span class="text-xs bg-teal-100 text-teal-700 font-bold px-2 py-1 rounded">Alta Precisi√≥n</span>
                                </div>
                                <p class="text-slate-500 text-sm font-mono bg-slate-50 p-2 rounded">Prompt: "Receta vegana, <500 cal, formato lista."</p>
                            </button>
                        </div>
                    </div>

                    <div class="bg-slate-900 rounded-2xl p-6 shadow-2xl relative overflow-hidden text-white">
                        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-500 via-indigo-500 to-cyan-500"></div>
                        <div class="flex justify-between items-end mb-4">
                            <div>
                                <h3 class="text-xl font-bold">Probabilidad de "Siguiente Palabra"</h3>
                                <p class="text-slate-400 text-sm">¬øQu√© tan confundida est√° la IA?</p>
                            </div>
                            <div id="status-indicator" class="px-3 py-1 rounded bg-slate-800 text-xs font-mono text-slate-400">ESPERANDO INPUT...</div>
                        </div>
                        <div class="chart-container">
                            <canvas id="entropyChart"></canvas>
                        </div>
                        <p id="entropy-desc" class="text-center text-slate-400 text-sm mt-4 font-mono border-t border-slate-800 pt-3">
                            Selecciona un tipo de prompt para simular el motor.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: THE FORMULA (RTCE + FRE) -->
        <section id="formula" class="scroll-mt-24">
            <div class="text-center mb-10">
                <span class="text-indigo-600 font-bold tracking-widest text-sm uppercase">Ingenier√≠a de Prompts</span>
                <h2 class="text-4xl font-heading font-bold text-slate-900 mt-2 mb-4">La F√≥rmula Maestra</h2>
                <p class="text-lg text-slate-600 max-w-2xl mx-auto">
                    El 90% de los errores vienen de pedir deseos en lugar de entregar planos. Usa <strong>RTCE + FRE</strong> para eliminar la ambig√ºedad.
                </p>
            </div>

            <div class="grid grid-cols-1 xl:grid-cols-12 gap-8">
                
                <!-- Left Column: Ingredients Builder -->
                <div class="xl:col-span-4 space-y-6">
                    <!-- RTCE Block -->
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4 opacity-10 text-9xl font-black text-slate-300 pointer-events-none">A</div>
                        <h3 class="text-sm font-bold text-indigo-600 uppercase tracking-wider mb-4 border-b pb-2">Bloque A: El "Qu√©" (RTCE)</h3>
                        <div class="grid grid-cols-1 gap-3">
                            <button onclick="toggleIngredient('rol')" id="btn-rol" class="ingredient-btn p-4 rounded-xl border border-slate-200 text-left group">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold">R</div>
                                    <div>
                                        <span class="block font-bold text-slate-800 group-[.active]:text-white">Rol</span>
                                        <span class="text-xs text-slate-500 group-[.active]:text-indigo-100">¬øQui√©n es la IA?</span>
                                    </div>
                                </div>
                            </button>
                            <button onclick="toggleIngredient('tarea')" id="btn-tarea" class="ingredient-btn p-4 rounded-xl border border-slate-200 text-left group">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold">T</div>
                                    <div>
                                        <span class="block font-bold text-slate-800 group-[.active]:text-white">Tarea</span>
                                        <span class="text-xs text-slate-500 group-[.active]:text-indigo-100">Verbo de acci√≥n</span>
                                    </div>
                                </div>
                            </button>
                            <button onclick="toggleIngredient('contexto')" id="btn-contexto" class="ingredient-btn p-4 rounded-xl border border-slate-200 text-left group">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold">C</div>
                                    <div>
                                        <span class="block font-bold text-slate-800 group-[.active]:text-white">Contexto</span>
                                        <span class="text-xs text-slate-500 group-[.active]:text-indigo-100">Trasfondo cr√≠tico</span>
                                    </div>
                                </div>
                            </button>
                            <button onclick="toggleIngredient('ejemplo')" id="btn-ejemplo" class="ingredient-btn p-4 rounded-xl border border-slate-200 text-left group">
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold">E</div>
                                    <div>
                                        <span class="block font-bold text-slate-800 group-[.active]:text-white">Ejemplo</span>
                                        <span class="text-xs text-slate-500 group-[.active]:text-indigo-100">Few-shot prompting</span>
                                    </div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <!-- FRE Block -->
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4 opacity-10 text-9xl font-black text-slate-300 pointer-events-none">B</div>
                        <h3 class="text-sm font-bold text-pink-600 uppercase tracking-wider mb-4 border-b pb-2">Bloque B: El "C√≥mo" (FRE)</h3>
                        <div class="grid grid-cols-3 gap-2">
                            <button onclick="toggleIngredient('formato')" id="btn-formato" class="ingredient-btn p-2 py-3 rounded-lg border border-slate-200 text-center group flex flex-col items-center gap-1">
                                <span class="text-xs font-bold text-slate-800 group-[.active]:text-white">Format</span>
                                <div class="w-1 h-1 rounded-full bg-pink-400"></div>
                            </button>
                            <button onclick="toggleIngredient('restriccion')" id="btn-restriccion" class="ingredient-btn p-2 py-3 rounded-lg border border-slate-200 text-center group flex flex-col items-center gap-1">
                                <span class="text-xs font-bold text-slate-800 group-[.active]:text-white">Restric</span>
                                <div class="w-1 h-1 rounded-full bg-pink-400"></div>
                            </button>
                            <button onclick="toggleIngredient('evaluacion')" id="btn-evaluacion" class="ingredient-btn p-2 py-3 rounded-lg border border-slate-200 text-center group flex flex-col items-center gap-1">
                                <span class="text-xs font-bold text-slate-800 group-[.active]:text-white">Eval</span>
                                <div class="w-1 h-1 rounded-full bg-pink-400"></div>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Center: Visualization -->
                <div class="xl:col-span-4">
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-slate-100 h-full flex flex-col justify-center relative">
                        <h3 class="font-bold text-slate-800 text-center mb-2">An√°lisis Estructural</h3>
                        <div class="chart-container">
                            <canvas id="recipeRadar"></canvas>
                        </div>
                        <div class="absolute top-6 right-6 text-right">
                             <div id="quality-score" class="text-3xl font-black text-slate-200">0%</div>
                             <div class="text-[10px] uppercase font-bold text-slate-400">Calidad</div>
                        </div>
                    </div>
                </div>

                <!-- Right: Preview -->
                <div class="xl:col-span-4">
                    <div class="bg-slate-800 text-slate-300 p-6 rounded-2xl shadow-lg h-full flex flex-col font-mono text-sm leading-relaxed border border-slate-700">
                        <div class="flex items-center gap-2 mb-4 pb-4 border-b border-slate-700/50">
                            <div class="w-3 h-3 rounded-full bg-red-500"></div>
                            <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                            <span class="ml-auto text-xs font-bold tracking-widest opacity-50">PROMPT_PREVIEW.TXT</span>
                        </div>
                        
                        <div id="prompt-preview" class="space-y-4 flex-grow overflow-y-auto pr-2 custom-scrollbar">
                            <p class="text-slate-500 italic text-center mt-10 opacity-50">
                                // Sistema esperando input...<br>
                                // Activa los m√≥dulos a la izquierda.
                            </p>
                        </div>
                        
                        <div class="mt-4 pt-4 border-t border-slate-700 text-[10px] text-slate-500 flex justify-between">
                            <span>Tokens est: <span id="token-count">0</span></span>
                            <span>Modelo: Gemini 1.5 Pro</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: THE CONTEXT (Gemini) -->
        <section id="context" class="scroll-mt-24">
            <div class="bg-gradient-to-br from-indigo-900 to-purple-900 rounded-3xl p-8 md:p-12 text-white shadow-2xl relative overflow-hidden">
                <!-- Decorative Elements -->
                <div class="absolute top-0 right-0 w-96 h-96 bg-pink-500 rounded-full blur-[100px] opacity-20 pointer-events-none"></div>
                <div class="absolute bottom-0 left-0 w-64 h-64 bg-cyan-500 rounded-full blur-[80px] opacity-20 pointer-events-none"></div>

                <div class="relative z-10 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <h2 class="text-3xl md:text-4xl font-bold font-heading">El Superpoder: Contexto Infinito</h2>
                        <p class="text-indigo-100 text-lg leading-relaxed">
                            <strong>Gemini 1.5 Pro</strong> no es un chat, es una biblioteca.
                            <br><br>
                            Los modelos antiguos (como GPT-4 est√°ndar) son como WhatsApp: olvidan lo de arriba. Gemini tiene una "Ventana de Contexto" de <strong>2 Millones de Tokens</strong>. Puede leer libros enteros, ver videos de 1 hora y auditar repositorios de c√≥digo sin perder ni un detalle.
                        </p>
                        
                        <div class="grid grid-cols-2 gap-4 mt-8">
                            <div class="bg-white/10 backdrop-blur p-4 rounded-xl border border-white/10">
                                <div class="text-2xl mb-2">üì±</div>
                                <h4 class="font-bold">WhatsApp</h4>
                                <p class="text-xs text-indigo-200 mt-1">Modelos Est√°ndar. Memoria corta. Se "marea" con mucho texto.</p>
                            </div>
                            <div class="bg-white/10 backdrop-blur p-4 rounded-xl border border-white/10 ring-2 ring-cyan-400/50">
                                <div class="text-2xl mb-2">üèõÔ∏è</div>
                                <h4 class="font-bold">Biblioteca</h4>
                                <p class="text-xs text-indigo-200 mt-1">Gemini 1.5. Memoria masiva. "Aguja en el pajar".</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-black/30 backdrop-blur-sm rounded-xl p-6 border border-white/10">
                        <h3 class="text-lg font-bold mb-6 flex justify-between items-center">
                            Capacidad de Memoria (Tokens)
                            <span class="text-[10px] font-bold px-2 py-1 bg-cyan-500 text-white rounded uppercase tracking-wider">Escala Logar√≠tmica</span>
                        </h3>
                        <div class="chart-container h-64">
                            <canvas id="contextChart"></canvas>
                        </div>
                        <p class="text-xs text-center text-indigo-300 mt-4">
                            *1,000 Tokens ‚âà 750 Palabras. La diferencia es exponencial.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- FOOTER / ACTION -->
        <footer class="bg-white border-t border-slate-200 pt-16 pb-12">
            <div class="max-w-4xl mx-auto px-4 text-center">
                <div class="inline-block p-3 rounded-full bg-indigo-50 text-indigo-600 mb-6 text-3xl">üöÄ</div>
                <h2 class="text-3xl font-bold text-slate-800 mb-4">Protocolo de Acci√≥n Inmediata</h2>
                <p class="text-slate-600 mb-10">No aprendes viendo, aprendes haciendo. Ejecuta esto hoy.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-left">
                    <div class="p-6 bg-slate-50 rounded-xl border border-slate-100 hover:border-indigo-200 transition group">
                        <div class="flex items-center gap-3 mb-3">
                            <span class="bg-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-slate-700 shadow-sm text-sm">1</span>
                            <h4 class="font-bold text-slate-800">Identificar</h4>
                        </div>
                        <p class="text-sm text-slate-500">Encuentra una tarea donde usaste lenguaje vago hoy ("rev√≠salo", "mej√≥ralo").</p>
                    </div>
                    <div class="p-6 bg-slate-50 rounded-xl border border-slate-100 hover:border-indigo-200 transition group">
                        <div class="flex items-center gap-3 mb-3">
                            <span class="bg-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-slate-700 shadow-sm text-sm">2</span>
                            <h4 class="font-bold text-slate-800">Estructurar</h4>
                        </div>
                        <p class="text-sm text-slate-500">Reescribe el prompt llenando las siglas: R (Rol), T (Tarea), C (Contexto).</p>
                    </div>
                    <div class="p-6 bg-slate-50 rounded-xl border border-slate-100 hover:border-indigo-200 transition group">
                        <div class="flex items-center gap-3 mb-3">
                            <span class="bg-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-slate-700 shadow-sm text-sm">3</span>
                            <h4 class="font-bold text-slate-800">Probar Gemini</h4>
                        </div>
                        <p class="text-sm text-slate-500">Sube un PDF pesado. P√≠dele un dato espec√≠fico de la p√°gina X. Mira la magia.</p>
                    </div>
                </div>
                
                <div class="mt-12 pt-8 border-t border-slate-100 text-slate-400 text-xs font-mono">
                    HYPERLEARN OS v1.0 ‚Ä¢ M√ìDULO 1 FINALIZADO
                </div>
            </div>
        </footer>

    </main>

    <!-- SCRIPTS -->
    <script>
        // --- UTILITIES ---
        const colors = {
            indigo: '#6366f1',
            pink: '#ec4899',
            cyan: '#22d3ee',
            slate: '#64748b',
            slateDark: '#1e293b'
        };

        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = colors.slate;

        // Label Wrapping Helper
        function formatLabel(str, maxwidth) {
            const sections = [];
            const words = str.split(" ");
            let temp = "";
            words.forEach((item, index) => {
                if (temp.length > 0) {
                    const concat = temp + ' ' + item;
                    if (concat.length > maxwidth) {
                        sections.push(temp);
                        temp = "";
                    } else {
                        if (index === (words.length - 1)) {
                            sections.push(concat);
                            return;
                        } else {
                            temp = concat;
                            return;
                        }
                    }
                }
                if (index === (words.length - 1)) {
                    sections.push(item);
                    return;
                }
                if (item.length < maxwidth) {
                    temp = item;
                } else {
                    sections.push(item);
                }
            });
            return sections;
        }

        // --- CHART 1: STOCHASTIC PARROT (Entropy) ---
        const ctxEntropy = document.getElementById('entropyChart').getContext('2d');
        const entropyChart = new Chart(ctxEntropy, {
            type: 'bar',
            data: {
                labels: ['Palabra A', 'Palabra B', 'Palabra C', 'Palabra D', 'Palabra E'],
                datasets: [{
                    label: 'Probabilidad (%)',
                    data: [20, 20, 20, 20, 20], // Initial flat distribution (High Entropy)
                    backgroundColor: 'rgba(148, 163, 184, 0.5)',
                    borderRadius: 4,
                    barPercentage: 0.6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { 
                        beginAtZero: true, 
                        max: 100, 
                        grid: { color: 'rgba(255,255,255,0.1)' },
                        ticks: { color: '#94a3b8' }
                    },
                    x: { 
                        grid: { display: false },
                        ticks: { color: '#94a3b8' }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: (tooltipItems) => {
                                const item = tooltipItems[0];
                                const label = item.chart.data.labels[item.dataIndex];
                                return Array.isArray(label) ? label.join(' ') : label;
                            }
                        }
                    }
                }
            }
        });

        document.getElementById('btn-vague').addEventListener('click', () => {
            entropyChart.data.labels = ['Comida', 'Algo', 'Plato', 'Cosa', 'Rico'];
            entropyChart.data.datasets[0].data = [25, 20, 15, 20, 20]; // Spread out
            entropyChart.data.datasets[0].backgroundColor = colors.pink;
            entropyChart.update();
            const status = document.getElementById('status-indicator');
            status.textContent = "ALTA ENTROP√çA DETECTADA";
            status.className = "px-3 py-1 rounded bg-pink-500/20 text-xs font-mono text-pink-400 border border-pink-500/50";
            document.getElementById('entropy-desc').innerHTML = "<span class='text-pink-400 font-bold'>Riesgo de Alucinaci√≥n.</span> La IA est√° 'adivinando' entre muchas opciones mediocres.";
        });

        document.getElementById('btn-precise').addEventListener('click', () => {
            entropyChart.data.labels = ['Ensalada', 'Verduras', 'Plato', 'Sopa', 'Bowl'];
            entropyChart.data.datasets[0].data = [85, 10, 3, 1, 1]; // Spiked
            entropyChart.data.datasets[0].backgroundColor = colors.cyan;
            entropyChart.update();
            const status = document.getElementById('status-indicator');
            status.textContent = "PROBABILIDAD COLAPSADA";
            status.className = "px-3 py-1 rounded bg-cyan-500/20 text-xs font-mono text-cyan-400 border border-cyan-500/50";
            document.getElementById('entropy-desc').innerHTML = "<span class='text-cyan-400 font-bold'>Precisi√≥n Quir√∫rgica.</span> La IA no tiene otra opci√≥n que darte lo que pediste.";
        });

        // --- CHART 2: THE RECIPE RADAR ---
        const recipeState = {
            rol: false,
            tarea: false,
            contexto: false,
            ejemplo: false,
            formato: false,
            restriccion: false,
            evaluacion: false
        };

        const ctxRadar = document.getElementById('recipeRadar').getContext('2d');
        const radarChart = new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: ['Autoridad (Rol)', 'Acci√≥n (Tarea)', 'Relevancia (Contexto)', 'Claridad (Ejemplo)', 'Usabilidad (Formato)', 'Seguridad (Restricci√≥n)'],
                datasets: [{
                    label: 'Integridad del Prompt',
                    data: [1, 2, 1, 0, 1, 0], // Baseline
                    fill: true,
                    backgroundColor: 'rgba(99, 102, 241, 0.2)', // Indigo 500 alpha
                    borderColor: colors.indigo,
                    pointBackgroundColor: colors.indigo,
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: colors.indigo,
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: '#e2e8f0' },
                        grid: { color: '#e2e8f0' },
                        pointLabels: {
                            font: { family: 'Inter', size: 10, weight: '700' },
                            color: '#64748b'
                        },
                        suggestedMin: 0,
                        suggestedMax: 5,
                        ticks: { display: false, stepSize: 1 }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: (tooltipItems) => {
                                const item = tooltipItems[0];
                                const label = item.chart.data.labels[item.dataIndex];
                                return Array.isArray(label) ? label.join(' ') : label;
                            }
                        }
                    }
                }
            }
        });

        function toggleIngredient(key) {
            recipeState[key] = !recipeState[key];
            const btn = document.getElementById(`btn-${key}`);
            
            if (recipeState[key]) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
            
            updateKitchen();
        }

        function updateKitchen() {
            // Update Data for Radar
            // Base values if inactive: 0 or 1. Active: 5.
            const data = [
                recipeState.rol ? 5 : 1,
                recipeState.tarea ? 5 : 2, // Tarea always has some base value
                recipeState.contexto ? 5 : 1,
                recipeState.ejemplo ? 5 : 0,
                recipeState.formato ? 5 : 1,
                recipeState.restriccion ? 5 : 0
            ];
            
            radarChart.data.datasets[0].data = data;
            radarChart.update();

            // Calculate Score
            const total = data.reduce((a, b) => a + b, 0);
            const percentage = Math.round((total / 30) * 100);
            const scoreEl = document.getElementById('quality-score');
            scoreEl.textContent = `${percentage}%`;
            
            // Color code score
            if (percentage < 40) {
                scoreEl.className = "text-3xl font-black text-pink-500 transition-colors";
            } else if (percentage < 80) {
                scoreEl.className = "text-3xl font-black text-yellow-500 transition-colors";
            } else {
                scoreEl.className = "text-3xl font-black text-cyan-500 transition-colors";
            }

            // Update Text Preview
            let previewHTML = "";
            let tokenCount = 0;
            
            // Logic to build the prompt string
            if (!Object.values(recipeState).some(x => x)) {
                previewHTML = `<p class="text-slate-500 italic text-center mt-10 opacity-50">// Sistema esperando input...<br>// Activa los m√≥dulos a la izquierda.</p>`;
            } else {
                // ROL
                if (recipeState.rol) {
                    previewHTML += `<div class="mb-3 border-l-2 border-indigo-500 pl-3"><span class="text-xs font-bold text-indigo-400 uppercase">Rol</span><p class="text-white font-bold">"Act√∫a como un Experto en Ciberseguridad Senior."</p></div>`;
                    tokenCount += 8;
                }
                
                // TAREA
                if (recipeState.tarea) {
                    previewHTML += `<div class="mb-3 border-l-2 border-slate-500 pl-3"><span class="text-xs font-bold text-slate-400 uppercase">Tarea</span><p class="text-slate-200">"Audita el siguiente fragmento de c√≥digo Python en busca de vulnerabilidades."</p></div>`;
                    tokenCount += 12;
                } else {
                    previewHTML += `<div class="mb-3 border-l-2 border-pink-800 pl-3 opacity-50"><span class="text-xs font-bold text-pink-700 uppercase">Tarea (Vaga)</span><p class="text-pink-300">"Revisa esto."</p></div>`;
                    tokenCount += 3;
                }
                
                // CONTEXTO
                if (recipeState.contexto) {
                    previewHTML += `<div class="mb-3 border-l-2 border-indigo-500 pl-3"><span class="text-xs font-bold text-indigo-400 uppercase">Contexto</span><p class="text-indigo-100">"El c√≥digo ser√° implementado en una startup de salud (HealthTech) que maneja datos sensibles de pacientes (HIPAA)."</p></div>`;
                    tokenCount += 25;
                }

                // EJEMPLO
                if (recipeState.ejemplo) {
                    previewHTML += `<div class="mb-3 border-l-2 border-indigo-500 pl-3"><span class="text-xs font-bold text-indigo-400 uppercase">Ejemplo (Few-Shot)</span><p class="text-slate-400 text-xs italic">"Input: print(password) -> Output: Vulnerabilidad cr√≠tica (CWE-532)."</p></div>`;
                    tokenCount += 15;
                }
                
                // FRE BLOCK
                if (recipeState.formato || recipeState.restriccion || recipeState.evaluacion) {
                    previewHTML += `<div class="mt-4 pt-4 border-t border-slate-700/50 grid grid-cols-1 gap-2">`;
                    if (recipeState.formato) {
                        previewHTML += `<div class="flex items-center gap-2 text-xs"><span class="w-2 h-2 rounded-full bg-pink-500"></span><span class="text-pink-300">Formato: Tabla Markdown (ID, Severidad, Fix).</span></div>`;
                        tokenCount += 6;
                    }
                    if (recipeState.restriccion) {
                        previewHTML += `<div class="flex items-center gap-2 text-xs"><span class="w-2 h-2 rounded-full bg-pink-500"></span><span class="text-pink-300">Restricci√≥n: No uses jerga t√©cnica innecesaria.</span></div>`;
                        tokenCount += 7;
                    }
                    if (recipeState.evaluacion) {
                        previewHTML += `<div class="flex items-center gap-2 text-xs"><span class="w-2 h-2 rounded-full bg-pink-500"></span><span class="text-pink-300">Eval: Soluci√≥n aplicable en <5 mins.</span></div>`;
                        tokenCount += 6;
                    }
                    previewHTML += `</div>`;
                }
            }
            
            document.getElementById('prompt-preview').innerHTML = previewHTML;
            document.getElementById('token-count').textContent = tokenCount;
        }

        // --- CHART 3: CONTEXT WINDOW ---
        const ctxContext = document.getElementById('contextChart').getContext('2d');
        new Chart(ctxContext, {
            type: 'bar',
            data: {
                labels: ['GPT-4 (Standard)', 'Claude 2', 'Gemini 1.5 Pro'],
                datasets: [{
                    label: 'Tokens de Contexto',
                    data: [32000, 200000, 1000000],
                    backgroundColor: [colors.slate, '#a855f7', colors.cyan], // Slate, Purple, Cyan
                    borderRadius: 4,
                    barPercentage: 0.6
                }]
            },
            options: {
                indexAxis: 'y', // Horizontal bar
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        type: 'logarithmic', // Log scale is crucial here
                        grid: { color: 'rgba(255,255,255,0.1)' },
                        ticks: { color: 'rgba(255,255,255,0.7)', callback: function(value, index, values) { return value.toLocaleString(); } }
                    },
                    y: {
                        grid: { display: false },
                        ticks: { color: 'white', font: { size: 12, weight: 'bold', family: 'Space Grotesk' } }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'rgba(0,0,0,0.8)',
                        callbacks: {
                            title: (tooltipItems) => {
                                const item = tooltipItems[0];
                                const label = item.chart.data.labels[item.dataIndex];
                                return Array.isArray(label) ? label.join(' ') : label;
                            },
                            label: (context) => {
                                let val = context.raw;
                                if(val >= 1000000) return " 1,000,000+ Tokens (Biblioteca Entera)";
                                if(val >= 200000) return " 200,000 Tokens (Novela Larga)";
                                return " 32,000 Tokens (Charla Corta)";
                            }
                        }
                    }
                }
            }
        });

        // Initialize Kitchen
        updateKitchen();

    </script>
</body>
</html>
